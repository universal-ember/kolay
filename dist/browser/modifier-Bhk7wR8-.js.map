{"version":3,"file":"modifier-Bhk7wR8-.js","sources":["../../src/browser/services/compiler/reactive.ts","../../src/browser/typedoc/narrowing.ts","../../src/browser/services/lazy-load.ts","../../src/browser/services/api-docs.ts","../../src/browser/typedoc/utils.gts","../../src/browser/typedoc/signature/args.gts","../../src/browser/typedoc/signature/element.gts","../../src/browser/typedoc/signature/component.gts","../../src/browser/typedoc/renderer.gts","../../src/browser/typedoc/signature/helper.gts","../../src/browser/typedoc/signature/modifier.gts"],"sourcesContent":["import { compile, getCompiler } from 'ember-repl';\nimport { resource, resourceFactory } from 'ember-resources';\n\n// import { lru } from '../../utils.ts';\nimport type Owner from '@ember/owner';\n\nexport function compileText(owner: Owner, text: string | null) {\n  // return lru(text, () =>\n  return compile(getCompiler(owner), text, {\n    /**\n     * Documentation can only be in markdown.\n     */\n    format: 'glimdown',\n  });\n  // );\n}\n\nexport function Compiled(textFn: string | null | (() => string | null)) {\n  return resource(({ owner }) => {\n    const text = typeof textFn === 'function' ? textFn() : textFn;\n\n    return compileText(owner, text);\n  });\n}\n\n// template-only support\nresourceFactory(Compiled);\n","import type { LiteralType, ReferenceType, SomeType } from 'typedoc';\n\ninterface HasType {\n  type: string;\n}\n\nexport function isReference(x?: HasType): x is ReferenceType {\n  if (!x) return false;\n\n  return x.type === 'reference';\n}\n\nexport function isLiteral(x: SomeType | undefined): x is LiteralType {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('type' in x)) return false;\n\n  return x.type === 'literal';\n}\n","import { assert } from '@ember/debug';\nimport { isDestroyed, isDestroying, registerDestructor } from '@ember/destroyable';\n\nimport type { Secret } from '../../types.ts';\nimport type Owner from '@ember/owner';\n\nexport const KEY = 'kolay/private/ðŸ˜‰-wut-r-u-doin-â¤ï¸';\n\nconst SECRET = Symbol.for('__kolay__secret__context__');\n\n/**\n * same logic in the setup.js plugin\n */\nexport function setupSecret(owner: Owner) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n  const secret = ((window as any)[SECRET] ||= {}) as Secret;\n\n  secret.owners ||= new Set();\n\n  secret.owners.add(owner);\n\n  registerDestructor(owner, () => secret.owners.delete(owner));\n}\n\nexport function getKey(_owner: unknown) {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n  const secret = (window as any)[SECRET] as unknown as Secret;\n\n  for (const owner of secret.owners) {\n    const isDanger = isDestroying(owner) || isDestroyed(owner);\n\n    if (!isDanger) return owner;\n  }\n\n  assert(\n    `Expected to have had setupKolay called from 'kolay/setup'. Be sure to call setupKolay before trying to use any of Kolay's components`\n  );\n}\n","import { assert } from '@ember/debug';\n\nimport { createStore } from 'ember-primitives/store';\n\nimport { getKey } from './lazy-load.ts';\n\nimport type { LoadTypedoc } from '../../types.ts';\n\nexport function typedocLoader(context: unknown) {\n  const owner = getKey(context);\n\n  return createStore(owner, DocsLoader);\n}\n\nclass DocsLoader {\n  _packages: string[] = [];\n  loadApiDocs: LoadTypedoc = {};\n\n  get packages() {\n    assert(\n      `packages was never set. Did you forget to import 'kolay/api-docs:virtual' and set it to 'apiDocs' when calling docs.setup()?`,\n      this._packages\n    );\n\n    return this._packages;\n  }\n\n  load = (name: string) => {\n    assert(`loadApiDocs was never set, did you forget to pass it do docs.setup?`, this.loadApiDocs);\n\n    const loader = this.loadApiDocs[name];\n\n    assert(\n      `Could load API Docs for ${name}. 'loadApiDocs' did not now how to find ${name}. Was '${name}' including in the build config?`,\n      loader\n    );\n\n    return loader();\n  };\n}\n","import Component from '@glimmer/component';\nimport { assert } from '@ember/debug';\n\nimport { Provide } from 'ember-primitives/dom-context';\nimport { use } from 'ember-resources';\nimport { getPromiseState } from 'reactiveweb/get-promise-state';\nimport { keepLatest } from 'reactiveweb/keep-latest';\nimport { ConsoleLogger, Deserializer, FileRegistry, type ProjectReflection } from 'typedoc/browser';\n\nimport { typedocLoader } from '../services/api-docs.ts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { Reflection } from 'typedoc';\n\nexport function findChildDeclaration(info: Reflection, name: string) {\n  if (!info.isDeclaration()) {\n    return;\n  }\n\n  return info.children?.find((child) => child.variant === 'declaration' && child.name === name);\n}\n\nexport const infoFor = (\n  project: ProjectReflection,\n  module: string,\n  name: string\n): Reflection | undefined => {\n  const moduleDoc = project.getChildByName([module]);\n\n  assert(\n    `Could not find module by name: ${module}. Make sure that the d.ts file is present in the generated api docs.`,\n    moduleDoc\n  );\n\n  const found = moduleDoc.getChildByName([name]);\n\n  return found;\n};\n\nexport const Query: TOC<{\n  Args: { module: string; name: string; info: ProjectReflection };\n  Blocks: { default: [Reflection]; notFound: [] };\n}> = <template>\n  {{#let (infoFor @info @module @name) as |info|}}\n    {{#if info}}\n      {{yield info}}\n    {{else}}\n      {{yield to='notFound'}}\n    {{/if}}\n  {{/let}}\n</template>;\n\nconst cache = new Map<string, () => Promise<ProjectReflection>>();\n\nexport class Load extends Component<{\n  Args: {\n    module: string;\n    name: string;\n    package: string;\n  };\n  Blocks: { default: [Reflection, ProjectReflection] };\n}> {\n  get #apiDocs() {\n    return typedocLoader(this);\n  }\n\n  get request() {\n    return getPromiseState(this.#createProject);\n  }\n\n  @use resolved = keepLatest({\n    value: () => this.request.resolved,\n    when: () => this.request.isLoading,\n  });\n\n  get #createProject() {\n    const { package: pkg } = this.args;\n\n    if (!pkg) {\n      throw new Error(`A @package must be specified to load.`);\n    }\n\n    const seen = cache.get(pkg);\n\n    if (seen) {\n      return seen;\n    }\n\n    const loadNew = async (): Promise<ProjectReflection> => {\n      const req = await this.#apiDocs.load(pkg);\n      const json = await req.json();\n\n      const logger = new ConsoleLogger();\n      const deserializer = new Deserializer(logger);\n      const project = deserializer.reviveProject('API Docs', json, {\n        projectRoot: '/',\n        registry: new FileRegistry(),\n      });\n\n      return project;\n    };\n\n    cache.set(pkg, loadNew);\n\n    return loadNew;\n  }\n\n  <template>\n    {{#if this.request.isLoading}}\n      Loading api docs...\n    {{/if}}\n\n    {{#if this.request.error}}\n      {{errorFor this.request.error}}\n    {{/if}}\n\n    {{#if this.request.resolved}}\n      <section>\n        <Query @info={{this.request.resolved}} @module={{@module}} @name={{@name}} as |type|>\n          <Provide @data={{this.request.resolved}} @key='project'>\n            {{yield type this.request.resolved}}\n          </Provide>\n        </Query>\n      </section>\n    {{/if}}\n  </template>\n}\n\nfunction errorFor(error: unknown): string | undefined {\n  if (typeof error === 'object' && null !== error) {\n    if ('reason' in error && typeof error.reason === 'string') {\n      return error.reason;\n    }\n  }\n\n  if (error instanceof Error) {\n    return `Error loading API docs: ${error.message}`;\n  }\n\n  return `Error loading API docs: ${String(error)}`;\n}\n","import { Heading } from 'ember-primitives/components/heading';\n\nimport { Comment, isIntrinsic, isNamedTuple, Type } from '../renderer.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type {\n  DeclarationReflection,\n  Reflection,\n  ReflectionFlags,\n  SignatureReflection,\n} from 'typedoc';\n\nconst not = (x: unknown) => !x;\n\nconst isComponent = (kind: 'component' | 'modifier' | 'helper') => kind === 'component';\n\n/**\n * Only components' args are prefixed with a `@`,\n * because only components have template-content.\n */\nexport const Args: TOC<{\n  Args: { kind: 'component' | 'modifier' | 'helper'; info: any };\n}> = <template>\n  {{#if @info}}\n    <Heading class='typedoc__heading'>Arguments</Heading>\n    {{#each (listifyArgs @info) as |child|}}\n      <span class='typedoc__{{@kind}}-signature__arg'>\n        <span class='typedoc__{{@kind}}-signature__arg-info'>\n          <pre class='typedoc__name'>{{if (isComponent @kind) '@'}}{{child.name}}</pre>\n          {{#if (isIntrinsic child.type)}}\n            <Type @info={{child.type}} />\n          {{else if (isNamedTuple child)}}\n            <Type @info={{child.element}} />\n          {{/if}}\n        </span>\n\n        {{#if (getFlags child.flags)}}\n          {{! we can potentially display more flags here in the future }}\n          <Flags @flags={{child.flags}} />\n        {{/if}}\n\n        {{#if (not (isIntrinsic child.type))}}\n          <Type @info={{child.type}} />\n        {{else if (isNamedTuple child)}}\n          <Type @info={{child.element}} />\n        {{else}}\n          <Comment @info={{child}} />\n        {{/if}}\n      </span>\n    {{/each}}\n  {{/if}}\n</template>;\n\nfunction listifyArgs(info: DeclarationReflection | Reflection): any[] {\n  if (!info) return [];\n\n  if (Array.isArray(info)) {\n    return info;\n  }\n\n  /**\n   * This object *may* have Named and Positional on them,\n   * in which case, we want to create [...Positional, Named]\n   */\n  if ('children' in info && Array.isArray(info.children)) {\n    if (info.children.length <= 2) {\n      const flattened = flattenArgs(info.children);\n\n      if (flattened.length > 0) {\n        return flattened;\n      }\n    }\n\n    return info.children;\n  }\n\n  let declaration = null;\n\n  if ('type' in info && info.type && 'declaration' in info.type && info.type.declaration) {\n    declaration = info.type.declaration;\n  }\n\n  if ('type' in info && info.type && info.type.type === 'reference') {\n    declaration = info.project.getReflectionById(info.type['_target']);\n  }\n\n  if (declaration) {\n    return listifyArgs(declaration);\n  }\n\n  console.warn('unhandled', info);\n\n  return [];\n}\n\nfunction flattenArgs(args: any[]): any[] {\n  const named = args.find((x) => x.name === 'Named');\n  const positional = args.find((x) => x.name === 'Positional');\n\n  const result = [];\n\n  if (positional) {\n    result.push(positional.type?.elements);\n  }\n\n  if (named) {\n    result.push(named);\n  }\n\n  return result.flat();\n}\n\n/**\n * Returns args for either a function or signature\n */\nexport function getArgs(\n  info?: Reflection | SignatureReflection | DeclarationReflection | DeclarationReflection[]\n) {\n  if (!info) return [];\n\n  if ('parameters' in info) {\n    return info.parameters;\n  }\n\n  if (Array.isArray(info)) {\n    return info.find((item) => item.name === 'Args');\n  }\n\n  if ('children' in info) {\n    return getArgs(info.children);\n  }\n}\n\nconst Flags: TOC<{\n  Args: { flags: ReflectionFlags };\n}> = <template>\n  <span class='typedoc__arg-flags'>\n    {{#each (getFlags @flags) as |flag|}}\n      <span class='typedoc__flag'>{{flag}}</span>\n    {{/each}}\n  </span>\n</template>;\n\nfunction getFlags(flags: ReflectionFlags): any[] {\n  // extremely simplified logic to determine flags, for now we only interested in `isOptional`\n  return [flags?.isOptional && 'optional'].filter(Boolean);\n}\n","import { ExternalLink } from 'ember-primitives/components/external-link';\nimport { Heading } from 'ember-primitives/components/heading';\n\nimport { isLiteral } from '../narrowing.ts';\nimport { Comment } from '../renderer.gts';\n\nimport type { TOC } from '@ember/component/template-only';\n\nconst mdnElement = (typeName: string) => {\n  const element = typeName.replace('HTML', '').replace('Element', '').toLowerCase();\n\n  return `https://developer.mozilla.org/en-US/docs/Web/HTML/Element/${element}`;\n};\n\nfunction hasName(info: any) {\n  return Boolean(info.type?.name);\n}\n\nexport const Element: TOC<{\n  Args: { kind: 'component' | 'modifier'; info: any };\n}> = <template>\n  {{#if @info}}\n    <section>\n      <Heading class='typedoc__heading typedoc__{{@kind}}-signature__element-header'>\n        <span class='typedoc__name'>{{@info.name}}</span>\n        <span class='typedoc__{{@kind}}-signature__element-type'>\n          {{#if (hasName @info)}}\n            <ExternalLink href={{mdnElement @info.type.name}} class='typedoc__type-link'>\n              {{@info.type.name}}\n              âžš\n            </ExternalLink>\n          {{else if (isLiteral @info.type)}}\n            {{String @info.type.value}}\n          {{/if}}\n        </span>\n      </Heading>\n    </section>\n    <span class='typedoc__{{@kind}}-signature__element'>\n      <Comment @info={{@info}} />\n    </span>\n  {{/if}}\n</template>;\n","import { Heading } from 'ember-primitives/components/heading';\n\nimport { isReference } from '../narrowing.ts';\nimport { Comment, Type } from '../renderer.gts';\nimport { findChildDeclaration, Load } from '../utils.gts';\nimport { Args } from './args.gts';\nimport { Element } from './element.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { ProjectReflection, Reflection } from 'typedoc';\n\nfunction getSignatureType(info: Reflection, project: ProjectReflection) {\n  /**\n   * export const Foo: TOC<{ signature here }> = <template> ... </template>\n   */\n  if (info.isDeclaration()) {\n    if (isReference(info.type) && info.type?.typeArguments?.[0]?.type === 'reflection') {\n      return info.type.typeArguments[0].declaration;\n    }\n\n    /**\n     * export class Foo extends Component<{ signature here }> { ... }\n     */\n    const extendedType = info.extendedTypes?.[0];\n\n    if (extendedType?.type === 'reference' && extendedType?.package === '@glimmer/component') {\n      const typeArg = extendedType.typeArguments?.[0];\n\n      if (typeArg) {\n        if (typeArg?.type === 'reflection') {\n          return typeArg.declaration;\n        }\n\n        /**\n         * export interface Signature { ... }\n         *\n         * export class Foo extends Component<Signature>\n         */\n        if ('_target' in typeArg) {\n          const id = (typeArg as any)._target;\n\n          return project.getReflectionById(id);\n        }\n      }\n    }\n\n    /**\n     * export interface Signature { ... }\n     * export const Foo: TOC<Signature> = <template> ... </template>\n     */\n    if (info.type?.type === 'reference') {\n      const typeArg = info.type?.typeArguments?.[0];\n\n      if (typeArg && '_target' in typeArg) {\n        const id = (typeArg as any)._target;\n\n        return project.getReflectionById(id);\n      }\n    }\n  }\n\n  /**\n   * export interface Signature { ... }\n   */\n  return info;\n}\n\nexport function getSignature(info: Reflection | undefined, project: ProjectReflection) {\n  if (!info) return;\n\n  const type = getSignatureType(info, project);\n\n  if (!type) return;\n\n  const Element = findChildDeclaration(type, 'Element');\n  const Args = findChildDeclaration(type, 'Args');\n  const Blocks = findChildDeclaration(type, 'Blocks');\n\n  const hasAny = Element || Args || Blocks;\n\n  if (!hasAny) return;\n\n  return {\n    Element,\n    Args,\n    Blocks,\n  };\n}\n\nexport const ComponentSignature: TOC<{\n  Args: {\n    /**\n     * Which module to import the type from\n     */\n    module: string;\n    /**\n     * The name of the component to render the type / JSDoc of\n     */\n    name: string;\n    /**\n     * The name of the package to lookup the module and export name.\n     */\n    package: string;\n  };\n}> = <template>\n  <Load @package={{@package}} @module={{@module}} @name={{@name}} as |declaration project|>\n    {{#let (getSignature declaration project) as |info|}}\n      <ComponentDeclaration @signature={{info}} />\n    {{/let}}\n  </Load>\n</template>;\n\nexport const ComponentDeclaration: TOC<{\n  Args: {\n    signature: NonNullable<ReturnType<typeof getSignature>>;\n  };\n}> = <template>\n  <Element @kind='component' @info={{@signature.Element}} />\n  <Args @kind='component' @info={{@signature.Args}} />\n  <Blocks @info={{@signature.Blocks}} />\n</template>;\n\nconst Blocks: TOC<{ Args: { info: any } }> = <template>\n  {{#if @info}}\n    <section>\n      <Heading class='typedoc__heading'>Blocks</Heading>\n      {{#each @info.type.declaration.children as |child|}}\n        <span class='typedoc__component-signature__block'>\n          <pre class='typedoc__name'>&lt;:{{child.name}}&gt;</pre>\n          {{! <span class='typedoc-category'>Properties </span> }}\n          <div class='typedoc__property'>\n            <Type @info={{child.type}} />\n            <Comment @info={{child}} />\n          </div>\n        </span>\n      {{/each}}\n    </section>\n  {{/if}}\n</template>;\n","// Glint broke glint-directives... _but_ this file is a mess anyway\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\nimport Component from '@glimmer/component';\nimport { assert } from '@ember/debug';\nimport { hash } from '@ember/helper';\nimport { getOwner } from '@ember/owner';\n\nimport { Consume } from 'ember-primitives/dom-context';\n\nimport { compileText } from '../services/compiler/reactive.ts';\nimport { isLiteral } from './narrowing.ts';\nimport {\n  ComponentDeclaration,\n  getSignature as getComponentSignature,\n} from './signature/component.gts';\nimport { Load } from './utils.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type {\n  ArrayType,\n  DeclarationReference,\n  DeclarationReflection,\n  LiteralType,\n  NamedTupleMember,\n  ReferenceType,\n  SignatureReflection,\n  SomeType,\n  TupleType,\n  UnionType,\n  UnknownType,\n} from 'typedoc';\n\n/**\n * Assumptions:\n * - we are documenting public API\n *   - component properties and methods are not public API\n *     - including the constructor, inherited methods, etc\n *   - only the signature describes what the public API is.\n */\nexport const APIDocs: TOC<{\n  Args: {\n    /**\n     * Which module to import the type from\n     */\n    module: string;\n    /**\n     * The name of the export to render the type / JSDoc of\n     */\n    name: string;\n    /**\n     * The name of the package to lookup the module and export name.\n     */\n    package: string;\n  };\n}> = <template>\n  <Load @module={{@module}} @name='{{@name}}' @package={{@package}} as |info|>\n    <Declaration @info={{info}} />\n  </Load>\n</template>;\n\n/**\n * Used for referencing the comment on a const or class.\n *\n * For example:\n * ```\n * /*\n *  * Comment block here is what is targeted\n *  *\\/\n * export const CommentQuery ...\n * ```\n *\n * Usage:\n * ```hbs\n * <CommentQuery @name=\"CommentQuery\" ... />\n * ```\n */\nexport const CommentQuery: TOC<{\n  Args: {\n    /**\n     * Which module to import the type from\n     */\n    module: string;\n    /**\n     * The name of the export to render the type / JSDoc of\n     */\n    name: string;\n    /**\n     * The name of the package to lookup the module and export name.\n     */\n    package: string;\n  };\n}> = <template>\n  <Load @package={{@package}} @module={{@module}} @name={{@name}} as |info|>\n    <Comment @info={{info}} />\n  </Load>\n</template>;\n\nexport function isGlimmerComponent(info: DeclarationReference) {\n  const extended = (info as any)?.extendedTypes?.[0];\n\n  if (!extended) return false;\n\n  return extended.name === 'default' && extended.package === '@glimmer/component';\n}\n\ninterface CommentSignature {\n  Args: {\n    info: {\n      comment?: {\n        summary?: { text: string }[];\n      };\n    };\n  };\n}\n\nexport class Comment extends Component<CommentSignature> {\n  get compiled() {\n    const summary = this.args.info?.comment?.summary;\n\n    if (!summary) return null;\n\n    const input = summary.map((x) => x.text).join('\\n');\n    const owner = getOwner(this);\n\n    assert(`[Bug]: owner is missing`, owner);\n\n    return compileText(owner, input);\n  }\n\n  <template>\n    {{#if this.compiled.isReady}}\n      <div class='typedoc-rendered-comment'>\n        <this.compiled.component />\n      </div>\n    {{/if}}\n  </template>\n}\n\nconst isIgnored = (name: string) => ['__type', 'TOC', 'TemplateOnlyComponent'].includes(name);\nconst isConst = (x: { flags: { isConst: boolean } }) => x.flags.isConst;\nconst not = (x: unknown) => !x;\nconst or = (...args: unknown) => args.find((x) => !!x);\n\nconst Declaration: TOC<{\n  Args: {\n    info: DeclarationReflection | undefined;\n  };\n}> = <template>\n  {{#if @info}}\n    <div class='typedoc__declaration'>\n      {{#if (not (isIgnored @info.name))}}\n        <span class='typedoc__declaration-name'>{{@info.name}}</span>\n      {{/if}}\n\n      {{#if (isConst @info)}}\n        <Comment @info={{@info}} />\n      {{/if}}\n\n      {{#if @info.type}}\n        <div class='typedoc__declaration-type'>\n          <Type @info={{@info.type}} />\n        </div>\n      {{/if}}\n\n      {{#if @info.children}}\n        <ul class='typedoc__declaration-children'>\n          {{#each @info.children as |child|}}\n            <li><Declaration @info={{child}} /></li>\n          {{/each}}\n        </ul>\n      {{/if}}\n\n      {{#if @info.signatures}}\n        <ul class='typedoc__declaration-signatures'>\n          {{#each @info.signatures as |child|}}\n            {{! @glint-expect-error }}\n            <li><Type @info={{child}} /></li>\n          {{/each}}\n        </ul>\n      {{/if}}\n\n      {{#if (not (isConst @info))}}\n        {{#if @info.comment.summary}}\n          <Comment @info={{@info}} />\n        {{/if}}\n      {{/if}}\n    </div>\n  {{/if}}\n</template>;\n\nconst Reflection: TOC<{ info: { declaration: DeclarationReflection } }> = <template>\n  <Declaration @info={{@info.declaration}} />\n</template>;\n\nconst isReference = (x: { type: string }) => x?.type === 'reference';\nconst isReflection = (x: { type: string }) => x?.type === 'reflection';\nconst isQuery = (x: { type: string }) => x?.type === 'query';\n\nexport const isIntrinsic = (x: { type: string }) => x?.type === 'intrinsic';\n\nconst isTuple = (x: { type: string }) => x?.type === 'tuple';\n\nexport const isNamedTuple = (x: SomeType | undefined): x is NamedTupleMember =>\n  x?.type === 'namedTupleMember';\n\nconst isVoidIntrinsic = (x: unknown | undefined) => {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('type' in x)) return false;\n\n  if (typeof x.type === 'object' && x.type !== null) {\n    if ('type' in x.type && 'name' in x.type) {\n      return x.type.type === 'intrinsic' && x.type.name === 'void';\n    }\n  }\n\n  return false;\n};\n\nconst isArray = (x: SomeType | undefined): x is ArrayType => {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('type' in x)) return false;\n\n  return x.type === 'array';\n};\n\nconst isFn = (x: SomeType | undefined) => {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('name' in x)) return false;\n  if (!('variant' in x)) return false;\n\n  return x.variant === 'signature';\n};\n\nconst isUnknownType = (x: SomeType | undefined): x is UnknownType => {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('type' in x)) return false;\n\n  return x.type === 'unknown';\n};\n\nconst isUnion = (x: SomeType | undefined): x is UnionType => {\n  if (!x) return false;\n  if (typeof x !== 'object') return false;\n  if (x === null) return false;\n  if (!('type' in x)) return false;\n\n  return x.type === 'union';\n};\n// function typeArg(info: DeclarationReference) {\n//   let extended = info?.extendedTypes?.[0]\n\n//   if (!extended) return false;\n\n//   return extended.typeArguments[0]\n// }\n//\nconst isInvokable = (info: ReferenceType) => info.name === 'Invokable';\n\nconst Reference: TOC<{ info: ReferenceType }> = <template>\n  {{#if (isInvokable @info)}}\n    <div class='typedoc__unknown__yield'>\n      <Intrinsic @info={{hash name='Component'}} />\n    </div>\n  {{else}}\n    <div class='typedoc__reference'>\n      {{#if (not (isIgnored @info.name))}}\n        <div class='typedoc__reference__name'>{{or @info.reflection.name @info.name}}</div>\n      {{/if}}\n      {{#if @info.typeArguments.length}}\n        <div class='typedoc__reference__typeArguments'>\n          &lt;\n          {{#each @info.typeArguments as |typeArg|}}\n            <div class='typedoc__reference__typeArgument'>\n              <Type @info={{typeArg}} />\n            </div>\n          {{/each}}\n          &gt;\n        </div>\n      {{/if}}\n    </div>\n  {{/if}}\n</template>;\n\nconst Intrinsic: TOC<{ info: { name: string } }> = <template>\n  <span class='typedoc__intrinsic'>{{or @info.reflection.name @info.name}}</span>\n</template>;\n\nconst VoidIntrinsic: TOC<{ info: { name: string } }> = <template>\n  <div class='typedoc__void_intrinsic'>\n    {{! @glint-expect-error }}\n    <Function @info={{@info}} />\n  </div>\n</template>;\n\nconst Tuple: TOC<{ Args: { info: TupleType } }> = <template>\n  {{#each @info.elements as |element|}}\n    <Type @info={{element}} />\n  {{/each}}\n</template>;\n\nexport const NamedTuple: TOC<{ Args: { info: NamedTupleMember } }> = <template>\n  <div class='typedoc__named-tuple'>\n    <div class='typedoc__name'>{{@info.name}}</div>\n    <Type @info={{@info.element}} />\n  </div>\n</template>;\n\nconst Array: TOC<{ Args: { info: ArrayType } }> = <template>\n  <div class='typedoc__array'>\n    <div class='typedoc__array__indicator'>Array of</div>\n    <Type @info={{@info.elementType}} />\n  </div>\n</template>;\n\nconst Function: TOC<{ Args: { info: SignatureReflection } }> = <template>\n  <div class='typedoc__function'>\n    <div class='typedoc__function__type'>\n      <div class='typedoc__function__open'>(</div>\n      <div class='typedoc__function__parameters'>\n        {{#each @info.parameters as |param|}}\n          <div class='typedoc__function__parameter__container'>\n            <div class='typedoc__function__parameter'>\n              <div class='typedoc__function__parameter__name'>{{param.name}}</div>\n              <div class='typedoc__function__parameter__type'>\n                {{! @glint-expect-error }}\n                <Type @info={{param.type}} />\n              </div>\n            </div>\n            <div class='typedoc__function__parameter__comment'>\n              <Comment @info={{param}} />\n            </div>\n          </div>\n        {{/each}}\n      </div>\n      <div class='typedoc__function__close'>) =></div>\n      <div class='typedoc__function__return_type'>\n        {{! @glint-expect-error }}\n        <Type @info={{@info.type}} />\n      </div>\n    </div>\n    <div class='typedoc__function_comment'>\n      <Comment @info={{@info}} />\n    </div>\n  </div>\n</template>;\n\nconst Unknown: TOC<{ Args: { info: any } }> = <template>\n  <div class='typedoc__unknown'>\n    {{@info.name}}\n  </div>\n</template>;\n\nconst Union: TOC<{ Args: { info: UnionType } }> = <template>\n  <div class='typedoc__union'>\n    {{#each @info.types as |type|}}\n      <div class='typedoc__union__type'>\n        <Type @info={{type}} />\n      </div>\n    {{/each}}\n  </div>\n</template>;\n\nconst literalAsString = (x: LiteralType['value']) => {\n  if (typeof x === 'string') {\n    return `\"${x}\"`;\n  }\n\n  if (typeof x === 'number' || typeof x === 'boolean' || x === null) {\n    return `${x}`;\n  }\n\n  return x.toString();\n};\n\nconst Literal: TOC<{ Args: { info: LiteralType } }> = <template>\n  <div class='typedoc__literal'>\n    {{literalAsString @info.value}}\n  </div>\n</template>;\n\nexport const Type: TOC<{ Args: { info: SomeType } }> = <template>\n  <Consume @key='project' as |project|>\n    {{#let (getComponentSignature @info.declaration project) as |maybe|}}\n      {{#if maybe}}\n        <ComponentDeclaration @signature={{maybe}} />\n      {{else if (isReference @info)}}\n        {{! @glint-expect-error }}\n        <Reference @info={{@info}} />\n      {{else if (isQuery @info)}}\n        <Type @info={{@info.queryType}} />\n      {{else if (isReflection @info)}}\n        {{! @glint-expect-error }}\n        <Reflection @info={{@info}} />\n      {{else if (isIntrinsic @info)}}\n        {{! @glint-expect-error }}\n        <Intrinsic @info={{@info}} />\n      {{else if (isTuple @info)}}\n        {{! @glint-expect-error }}\n        <Tuple @info={{@info}} />\n      {{else if (isNamedTuple @info)}}\n        <NamedTuple @info={{@info}} />\n      {{else if (isVoidIntrinsic @info)}}\n        {{! @glint-expect-error }}\n        <VoidIntrinsic @info={{@info}} />\n      {{else if (isArray @info)}}\n        <Array @info={{@info}} />\n      {{else if (isFn @info)}}\n        {{! @glint-expect-error }}\n        <Function @info={{@info}} />\n      {{else if (isUnion @info)}}\n        <Union @info={{@info}} />\n      {{else if (isLiteral @info)}}\n        <Literal @info={{@info}} />\n      {{else if (isUnknownType @info)}}\n        <Unknown @info={{@info}} />\n      {{else}}\n        {{! template-lint-disable no-log }}\n        {{log 'Unknown Type' @info}}\n      {{/if}}\n    {{/let}}\n  </Consume>\n</template>;\n","import { Heading } from 'ember-primitives/components/heading';\n\nimport { Type } from '../renderer.gts';\nimport { Load } from '../utils.gts';\nimport { Args, getArgs } from './args.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { ProjectReflection, Reflection } from 'typedoc';\n\nfunction getSignature(info: Reflection, project: ProjectReflection) {\n  if (!info.isDeclaration()) {\n    return;\n  }\n\n  /**\n   * export const Foo: HelperLike<{...}>\n   */\n  if (\n    info.type?.type === 'reference' &&\n    info.type?.package === 'kolay' &&\n    info.type.symbolId?.packagePath?.includes('fake-glint-template.d.ts') &&\n    info.type?.name === 'HelperLike' &&\n    Array.isArray(info.type?.typeArguments) &&\n    info.type.typeArguments[0] &&\n    'declaration' in info.type.typeArguments[0]\n  ) {\n    // There can only be one type argument for a HelperLike\n    return info.type.typeArguments[0]?.declaration;\n  }\n\n  /**\n   * export class MyHelper extends ...\n   */\n  if (Array.isArray(info.extendedTypes) && info.extendedTypes.length > 0) {\n    const firstExtended = info.extendedTypes[0];\n\n    /**\n     * import Helper from '@ember/component/helper';\n     *\n     * export class MyHelper extends Helper<{...}>\n     */\n    if (\n      firstExtended?.type === 'reference' &&\n      firstExtended.package === 'ember-source' &&\n      firstExtended.qualifiedName.includes('/helper') &&\n      Array.isArray(firstExtended.typeArguments) &&\n      firstExtended.typeArguments[0] &&\n      'declaration' in firstExtended.typeArguments[0]\n    ) {\n      return firstExtended.typeArguments[0].declaration;\n    }\n\n    /**\n     * import Helper from '@ember/component/helper';\n     * But the types for the helper are not present\n     *\n     * export class MyHelper extends Helper<{...}>\n     */\n    if (\n      firstExtended?.type === 'reference' &&\n      Array.isArray(firstExtended.typeArguments) &&\n      firstExtended.typeArguments[0]\n    ) {\n      const firstTypeArg = firstExtended.typeArguments[0];\n\n      if ('declaration' in firstTypeArg) {\n        return firstTypeArg.declaration;\n      }\n\n      /**\n       * import Helper from '@ember/component/helper';\n       *\n       * export interface Signature { ... }\n       *\n       * export class MyHelper extends Helper<Signature>\n       */\n      if ('_target' in firstTypeArg && '_project' in firstTypeArg) {\n        const id = (firstTypeArg as any)._target;\n\n        return project.getReflectionById(id);\n      }\n    }\n  }\n\n  /**\n   * export function(...): return;\n   */\n  if (info.signatures) {\n    return info.signatures;\n  }\n\n  /**\n   * alt\n   * export function(...): return;\n   */\n  if (info.type && 'declaration' in info.type && info.type.declaration?.signatures) {\n    return info.type.declaration.signatures;\n  }\n\n  /**\n   * export interface Signature { ... }\n   */\n  return info;\n}\n\nfunction getReturn(info: any) {\n  if (!info) return;\n\n  if (info.variant === 'signature') {\n    return info.type;\n  }\n\n  if (Array.isArray(info)) {\n    return info.find((item) => item.name === 'Return')?.type;\n  }\n\n  if ('children' in info) {\n    return getReturn(info.children);\n  }\n}\n\nconst Return: TOC<{ Args: { info: any } }> = <template>\n  {{#if @info}}\n    <section class='typedoc__helper__return'>\n      <Heading class='typedoc__heading'>Return</Heading>\n\n      <Type @info={{@info}} />\n    </section>\n  {{/if}}\n</template>;\n\nexport const HelperSignature: TOC<{\n  Args: {\n    /**\n     * Which module to import the type from\n     */\n    module: string;\n    /**\n     * The name of the component to render the type / JSDoc of\n     */\n    name: string;\n    /**\n     * The name of the package to lookup the module and export name.\n     */\n    package: string;\n  };\n}> = <template>\n  <Load @package={{@package}} @module={{@module}} @name={{@name}} as |declaration project|>\n    {{#let (getSignature declaration project) as |info|}}\n      {{#if (Array.isArray info)}}\n        {{#each info as |signature|}}\n          <Args @kind='helper' @info={{getArgs signature}} />\n          <Return @info={{getReturn signature}} />\n        {{/each}}\n      {{else}}\n        {{! Whenever we have a \"Full Signature\" or \"HelperLike\" definition }}\n        <Args @kind='helper' @info={{getArgs info}} />\n        <Return @info={{getReturn info}} />\n      {{/if}}\n\n    {{/let}}\n  </Load>\n</template>;\n","/** eslint-disable @typescript-eslint/no-unused-vars */\nimport { findChildDeclaration, Load } from '../utils.gts';\nimport { Args } from './args.gts';\nimport { Element } from './element.gts';\n\nimport type { TOC } from '@ember/component/template-only';\nimport type { ProjectReflection, Reflection } from 'typedoc';\n\nfunction getSignatureType(info: Reflection, _project: ProjectReflection) {\n  if (!info.isDeclaration()) {\n    return info;\n  }\n\n  /**\n   * export const Foo: TOC<{ signature here }> = <template> ... </template>\n   */\n  if (info.type?.type === 'reference' && info.type?.typeArguments?.[0]?.type === 'reflection') {\n    return info.type.typeArguments[0].declaration;\n  }\n\n  /**\n   * import { modifier } from 'ember-modifier';\n   *\n   * export const foo = modifier<{ ... }>(() => {});\n   */\n  // TODO: need to add ember-modifier's types to the typedoc generator\n\n  /**\n   * (implicit signature)\n   *\n   * import { modifier } from 'ember-modifier';\n   *\n   * export const foo = modifier(() => {});\n   */\n  if (info.type && 'package' in info.type) {\n    if (info.type.package === 'ember-modifier') {\n      // can't get at the inline signature here\n    }\n\n    /**\n     * import type { ModifierLike } from '@glint/template';\n     *\n     * export const X: ModifierLike<{ ... }>\n     */\n    if (\n      info.type?.package === 'kolay' &&\n      info.type.symbolId?.packagePath?.includes('fake-glint-template.d.ts') &&\n      Array.isArray(info.type?.typeArguments) &&\n      info.type.typeArguments.length > 0\n    ) {\n      const typeArg = info.type?.typeArguments[0];\n\n      if (typeArg && 'declaration' in typeArg) {\n        return typeArg.declaration;\n      }\n    }\n  }\n\n  if (info.variant === 'declaration' && 'extendedTypes' in info) {\n    const extendedType = info.extendedTypes?.[0];\n\n    if (extendedType?.type === 'reference' && extendedType?.package === 'ember-modifier') {\n      const typeArg = extendedType.typeArguments?.[0];\n\n      if (typeArg?.type === 'reflection') {\n        return typeArg.declaration;\n      }\n    }\n  }\n\n  /**\n   * export interface Signature { ... }\n   */\n  return info;\n}\n\nfunction getSignature(info: Reflection, project: ProjectReflection) {\n  const type = getSignatureType(info, project);\n\n  if (!type) {\n    console.warn('Could not finde signature');\n\n    return;\n  }\n\n  return {\n    Element: findChildDeclaration(type, 'Element'),\n    Args: findChildDeclaration(type, 'Args'),\n  };\n}\n\nexport const ModifierSignature: TOC<{\n  Args: {\n    /**\n     * Which module to import the type from\n     */\n    module: string;\n    /**\n     * The name of the component to render the type / JSDoc of\n     */\n    name: string;\n    /**\n     * The name of the package to lookup the module and export name.\n     */\n    package: string;\n  };\n}> = <template>\n  <Load @package={{@package}} @module={{@module}} @name={{@name}} as |declaration project|>\n    {{#let (getSignature declaration project) as |info|}}\n      <Element @kind='modifier' @info={{info.Element}} />\n      <Args @kind='modifier' @info={{info.Args}} />\n    {{/let}}\n  </Load>\n</template>;\n"],"names":["compileText","owner","text","compile","getCompiler","format","Compiled","textFn","resource","resourceFactory","isReference","x","type","isLiteral","SECRET","Symbol","for","setupSecret","secret","window","owners","Set","add","registerDestructor","delete","getKey","_owner","isDanger","isDestroying","isDestroyed","assert","typedocLoader","context","createStore","DocsLoader","_packages","loadApiDocs","packages","load","name","loader","findChildDeclaration","info","isDeclaration","children","find","child","variant","infoFor","project","module","moduleDoc","getChildByName","found","Query","setComponentTemplate","precompileTemplate","strictMode","scope","templateOnly","cache","Map","Load","Component","#apiDocs","request","getPromiseState","g","prototype","use","keepLatest","value","resolved","when","isLoading","i","#createProject","package","pkg","args","Error","seen","get","loadNew","req","json","logger","ConsoleLogger","deserializer","Deserializer","reviveProject","projectRoot","registry","FileRegistry","set","errorFor","Provide","error","reason","message","String","not","isComponent","kind","Args","Heading","listifyArgs","isIntrinsic","Type","isNamedTuple","getFlags","Flags","Comment","Array","isArray","length","flattened","flattenArgs","declaration","getReflectionById","console","warn","named","positional","result","push","elements","flat","getArgs","parameters","item","flags","isOptional","filter","Boolean","mdnElement","typeName","element","replace","toLowerCase","hasName","Element","ExternalLink","getSignatureType","typeArguments","extendedType","extendedTypes","typeArg","id","_target","getSignature","Blocks","hasAny","ComponentSignature","ComponentDeclaration","APIDocs","Declaration","CommentQuery","compiled","summary","comment","input","map","join","getOwner","isIgnored","includes","isConst","or","Reflection","isReflection","isQuery","isTuple","isVoidIntrinsic","isFn","isUnknownType","isUnion","isInvokable","Reference","Intrinsic","hash","VoidIntrinsic","Function","Tuple","NamedTuple","Unknown","Union","literalAsString","toString","Literal","Consume","getComponentSignature","symbolId","packagePath","firstExtended","qualifiedName","firstTypeArg","signatures","getReturn","Return","HelperSignature","_project","ModifierSignature"],"mappings":"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"}
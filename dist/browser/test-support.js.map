{"version":3,"file":"test-support.js","sources":["../../src/browser/test-support.ts"],"sourcesContent":["import { setupCompiler } from 'ember-repl/test-support';\n\nimport { compilerOptions, docsManager, PREPARE_DOCS } from './services/docs.ts';\nimport { setupSecret } from './services/lazy-load.ts';\nimport { forceFindOwner } from './utils.ts';\n\nimport type { setupTest } from 'ember-qunit';\nimport type { setupKolay as setup } from 'kolay/setup';\n\ntype Options = Parameters<typeof setup>[1];\ntype NestedHooks = Parameters<typeof setupTest>[0];\n\nexport function setupKolay(hooks: NestedHooks, config?: Options): void {\n  setupCompiler(hooks, compilerOptions(config ?? {}));\n\n  hooks.beforeEach(async function () {\n    setupSecret(this.owner);\n\n    const docs = docsManager(this.owner);\n\n    const [apiDocs, compiledDocs] = await Promise.all([\n      import('kolay/api-docs:virtual'),\n      import('kolay/compiled-docs:virtual'),\n    ]);\n\n    docs[PREPARE_DOCS](apiDocs, compiledDocs);\n  });\n}\n\n/**\n * For changing which sub-context is loaded as the primary set of docs\n *\n * @param {unknown | Owner} context - can be the owner or an object that has had setOwner applied to it.\n */\nexport function selectGroup(context: unknown, groupName = 'root'): void {\n  const owner = forceFindOwner(context);\n  const docs = docsManager(owner);\n\n  docs.selectGroup(groupName);\n}\n"],"names":["setupKolay","hooks","config","setupCompiler","compilerOptions","beforeEach","setupSecret","owner","docs","docsManager","apiDocs","compiledDocs","Promise","all","PREPARE_DOCS","selectGroup","context","groupName","forceFindOwner"],"mappings":";;;;AAYO,SAASA,UAAUA,CAACC,KAAkB,EAAEC,MAAgB,EAAQ;EACrEC,aAAa,CAACF,KAAK,EAAEG,eAAe,CAACF,MAAM,IAAI,EAAE,CAAC,CAAC;EAEnDD,KAAK,CAACI,UAAU,CAAC,kBAAkB;AACjCC,IAAAA,WAAW,CAAC,IAAI,CAACC,KAAK,CAAC;AAEvB,IAAA,MAAMC,IAAI,GAAGC,WAAW,CAAC,IAAI,CAACF,KAAK,CAAC;IAEpC,MAAM,CAACG,OAAO,EAAEC,YAAY,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAChD,OAAO,wBAAwB,CAAC,EAChC,OAAO,6BAA6B,CAAC,CACtC,CAAC;AAEFL,IAAAA,IAAI,CAACM,YAAY,CAAC,CAACJ,OAAO,EAAEC,YAAY,CAAC;AAC3C,EAAA,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACO,SAASI,WAAWA,CAACC,OAAgB,EAAEC,SAAS,GAAG,MAAM,EAAQ;AACtE,EAAcC,cAAc,CAACF,OAAO;AACpC,EAAA,MAAMR,IAAI,GAAGC,WAAW,CAAM,CAAC;AAE/BD,EAAAA,IAAI,CAACO,WAAW,CAACE,SAAS,CAAC;AAC7B;;;;"}
---
import MarkdownLayout from '../../layouts/MarkdownLayout.astro';
import { loadManifest, slugToTitle } from '../../utils/loadManifest';
import KolayPageWithSetup from '../../components/KolayPageWithSetup.gts';

// For SSG, we need to define all possible paths from the manifest
export async function getStaticPaths() {
  const manifest = await loadManifest();
  const runtimeGroup = manifest.groups.find(g => g.name === 'Runtime');
  
  if (!runtimeGroup) {
    return [];
  }

  return runtimeGroup.list.map(page => ({
    params: { 
      slug: page.path.replace('/Runtime/', '').replace(/^\//, '')
    }
  }));
}

const { slug } = Astro.params;
const title = slugToTitle(slug);
---

<MarkdownLayout title={title}>
  <!-- Use the component that properly initializes kolay -->
  <KolayPageWithSetup client:only="ember" />
</MarkdownLayout>
